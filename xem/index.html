<!DOCTYPE html>
<html lang="vi">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TRI·∫æT H·ªåC MARX-LENIN</title>

    <!-- Three.js & MediaPipe -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/control_utils/control_utils.js"
        crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script>

    <link rel="stylesheet" href="style.css">
</head>

<body>
    <!-- Background Music -->
    <audio id="bg-music" src="dang.mp3" loop preload="auto"></audio>

    <!-- Audio Toggle Button -->
    <button id="audio-btn" onclick="toggleAudio()" title="B·∫≠t/T·∫Øt nh·∫°c">üîá</button>

    <!-- Welcome Screen -->
    <div id="welcome-overlay">
        <div id="welcome-container">
            <h1 id="welcome-title">‚ò≠ TRI·∫æT H·ªåC MARX-LENIN</h1>
            <p id="welcome-subtitle">Kh√°m ph√° d√≤ng ch·∫£y l·ªãch s·ª≠</p>

            <div id="welcome-options">
                <button class="welcome-btn" onclick="startGestureMode()">
                    <span class="btn-icon">üñê</span>
                    <span class="btn-text">Tr·∫£i nghi·ªám c·ª≠ ch·ªâ tay</span>
                    <span class="btn-desc">ƒêi·ªÅu khi·ªÉn b·∫±ng camera</span>
                </button>

                <button class="welcome-btn" onclick="startMouseMode()">
                    <span class="btn-icon">üñ±Ô∏è</span>
                    <span class="btn-text">D√πng con tr·ªè</span>
                    <span class="btn-desc">ƒêi·ªÅu khi·ªÉn b·∫±ng chu·ªôt</span>
                </button>
            </div>
        </div>
    </div>

    <div id="canvas-container"></div>
    <!-- L·ªõp ph·ªß ·∫£nh n·ªÅn trang tr√≠ -->
    <div class="bg-overlay"></div>

    <!-- Header -->
    <div id="header" style="display: none;">
        <div id="title">‚ò≠ TRI·∫æT H·ªåC MARX-LENIN</div>
        <canvas id="camera-preview"></canvas>
    </div>

    <!-- Carousel Cards Container -->
    <div id="node-cards-container">


        <div id="node-cards-wrapper">
            <div class="node-card" data-node-id="1">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#8B0000,#D32F2F);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        ‚ò≠</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Kh·ªüi ƒë·∫ßu</h3>
                    <p class="card-desc">Ch·ªß nghƒ©a M√°c: L√Ω lu·∫≠n c√°ch m·∫°ng</p>
                </div>
            </div>

            <div class="node-card" data-node-id="2">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#B30000,#FF6B6B);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        ‚öíÔ∏è</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Th·ª≠ th√°ch</h3>
                    <p class="card-desc">ƒê·∫•u tranh giai c·∫•p & C√°ch m·∫°ng C√¥ng nghi·ªáp</p>
                </div>
            </div>

            <div class="node-card" data-node-id="3">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#FFD700,#FFA500);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        üìö</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Kinh nghi·ªám</h3>
                    <p class="card-desc">C√°ch m·∫°ng Th√°ng M∆∞·ªùi & X√¢y d·ª±ng XHCN</p>
                </div>
            </div>

            <div class="node-card" data-node-id="4">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#4ECDC4,#44A08D);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        üåè</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Th·ª±c ti·ªÖn</h3>
                    <p class="card-desc">Th·ª±c ti·ªÖn Vi·ªát Nam</p>
                </div>
            </div>

            <div class="node-card" data-node-id="5">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#667eea,#764ba2);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        üéì</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Th·∫ø gi·ªõi quan</h3>
                    <p class="card-desc">Ch·ªß nghƒ©a duy v·∫≠t bi·ªán ch·ª©ng</p>
                </div>
            </div>

            <div class="node-card" data-node-id="6">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#f093fb,#f5576c);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        üí°</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">Nh·∫≠n th·ª©c</h3>
                    <p class="card-desc">Ch·ªß nghƒ©a duy v·∫≠t l·ªãch s·ª≠</p>
                </div>
            </div>

            <div class="node-card" data-node-id="7">
                <div class="card-image">
                    <div
                        style="width:100%;height:100%;background:linear-gradient(135deg,#fa709a,#fee140);display:flex;align-items:center;justify-content:center;font-size:48px;">
                        üö©</div>
                </div>
                <div class="card-content">
                    <h3 class="card-title">ƒê√≠ch ƒë·∫øn</h3>
                    <p class="card-desc">Ch·ªß nghƒ©a C·ªông s·∫£n: Th·∫ø gi·ªõi ƒë·∫°i ƒë·ªìng</p>
                </div>
            </div>
        </div>

    </div>

    <!-- Vertical Gesture Panel (Right Side)    -->
    <div id="gesture-panel">
        <div id="controls-vertical">
            <div class="gesture-hint">
                <span class="gesture-icon">üëà</span>
                <span>Tr√°i: Di chuy·ªÉn</span>
            </div>
            <div class="gesture-hint">
                <span class="gesture-icon">‚òùÔ∏è</span>
                <span>P1: Cursor</span>
            </div>
            <div class="gesture-hint">
                <span class="gesture-icon">‚úåÔ∏è</span>
                <span>P2: Ch·ªçn</span>
            </div>
            <div class="gesture-hint">
                <span class="gesture-icon">ü§è</span>
                <span>Pinch: Zoom+</span>
            </div>
            <div class="gesture-hint">
                <span class="gesture-icon">‚úä</span>
                <span>ƒê·∫•m: Zoom-</span>
            </div>
            <div class="gesture-hint">
                <span class="gesture-icon">üññ</span>
                <span>3 ng√≥n: Quay</span>
            </div>
        </div>

        <button id="btn-toggle-cursor" onclick="toggleCursor()">üëÜ Con tr·ªè: T·∫Øt</button>
    </div>

    <!-- Toggle Cursor Button (Old - will be hidden) -->
    <button id="btn-toggle-cursor-old" onclick="toggleCursor()" style="display: none;">üëÜ Con tr·ªè: T·∫Øt</button>
    <button id="btn-toggle-cursor-standalone" onclick="toggleCursor()" style="display: none;">üëÜ Con tr·ªè: T·∫Øt</button>

    <!-- Virtual Cursor -->
    <div id="virtual-cursor"></div>

    <!-- Start Button (Hidden - replaced by welcome screen) -->
    <button id="btnStart" onclick="startSystem()" style="display: none;">üñê START WITH GESTURES</button>

    <!-- Status -->
    <div id="status" style="display: none;">ƒêang ch·ªù kh·ªüi ƒë·ªông...</div>

    <!-- Node Info Panel -->
    <div id="node-info">
        <h3 id="node-title">Node Title</h3>
        <p id="node-desc">Node description goes here</p>
    </div>

    <!-- Controls Hint (Old - Hidden) -->
    <div id="controls" style="display: none;">
        <div class="gesture-hint">
            <span class="gesture-icon">üëà</span>
            <span>Tr√°i: Di chuy·ªÉn</span>
        </div>
        <div class="gesture-hint">
            <span class="gesture-icon">‚òùÔ∏è</span>
            <span>P1: Cursor</span>
        </div>
        <div class="gesture-hint">
            <span class="gesture-icon">‚úåÔ∏è</span>
            <span>P2: Ch·ªçn</span>
        </div>
        <div class="gesture-hint">
            <span class="gesture-icon">ü§è</span>
            <span>Pinch: Zoom+</span>
        </div>
        <div class="gesture-hint">
            <span class="gesture-icon">‚úä</span>
            <span>ƒê·∫•m: Zoom-</span>
        </div>
        <div class="gesture-hint">
            <span class="gesture-icon">üññ</span>
            <span>3 ng√≥n: Quay</span>
        </div>
    </div>

    <!-- Debug -->
    <div id="debug"></div>

    <!-- Detail View Overlay (Drill-down) -->
    <div id="detail-overlay">
        <div id="detail-container">
            <div id="detail-header">
                <!-- Removed redundant detail-back button -->
                <h1 id="detail-title">Node Title</h1>
            </div>

            <div id="detail-description">
                M√¥ t·∫£ chi ti·∫øt v·ªÅ node n√†y...
            </div>

            <!-- Video Section -->
            <div class="detail-section" id="video-section" style="display: none;">
                <h3 class="detail-section-title">üé• Video</h3>
                <iframe id="detail-video" src="" frameborder="0" allowfullscreen></iframe>
            </div>

            <!-- Events Timeline -->
            <div class="detail-section" id="events-section" style="display: none;">
                <h3 class="detail-section-title">üìÖ S·ª± ki·ªán</h3>
                <div id="detail-events"></div>
            </div>

            <!-- Sub-nodes -->
            <div class="detail-section" id="subnodes-section" style="display: none;">
                <h3 class="detail-section-title">üåø Nh√°nh con</h3>
                <div id="detail-subnodes"></div>
            </div>
        </div>

        <!-- Removed redundant detail-gesture-hint -->
    </div>


    <!-- Global Back Button (Bottom-Right) -->
    <button id="global-back-btn" onclick="goBack()" style="display: none;">
        ‚Üê Quay l·∫°i
    </button>

    <!-- Copyright -->
    <div id="copyright">¬© Timeline Gesture by nguyencongtuyenlp</div>

    <!-- Hidden Video -->
    <video class="video-hidden input_video"></video>

    <script src="data.js"></script>
    <script src="script.js"></script>
</body>

</html>